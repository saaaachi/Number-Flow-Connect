<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Flow Connect ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
    <style>
        body { background: #0f172a; color: white; font-family: sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        #maker-grid { display: grid; background: #1e293b; gap: 4px; padding: 10px; border-radius: 8px; margin-bottom: 20px; }
        .cell { width: 50px; height: 50px; background: #334155; border-radius: 4px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; }
        .cell:hover { background: #475569; }
        .controls { background: #1e293b; padding: 20px; border-radius: 12px; width: 350px; }
        select, input, button { width: 100%; padding: 10px; margin: 5px 0; border-radius: 5px; border: none; }
        button { background: #22c55e; color: white; font-weight: bold; cursor: pointer; }
        #output { width: 100%; height: 100px; margin-top: 10px; background: #000; color: #0f0; font-family: monospace; font-size: 12px; padding: 10px; border-radius: 5px; overflow-y: auto; word-break: break-all; }
        .dot { width: 34px; height: 34px; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <h2>ğŸ¨ ã‚¹ãƒ†ãƒ¼ã‚¸ãƒ¡ãƒ¼ã‚«ãƒ¼</h2>
    
    <div class="controls">
        ã‚µã‚¤ã‚ºé¸æŠ: 
        <select id="size-select" onchange="initGrid()">
            <option value="5">5 x 5</option>
            <option value="6">6 x 6</option>
            <option value="7">7 x 7</option>
            <option value="8">8 x 8</option>
        </select>
        é…ç½®ã™ã‚‹æ•°å­—: <input type="number" id="num-input" value="1" min="1">
        é…ç½®ã™ã‚‹è‰²: <select id="color-select">
            <option value="#ef4444">Red</option>
            <option value="#3b82f6">Blue</option>
            <option value="#22c55e">Green</option>
            <option value="#facc15">Yellow</option>
            <option value="#a855f7">Purple</option>
        </select>
        <button onclick="copyToClipboard()">ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼</button>
    </div>

    <div id="maker-grid" style="margin-top:20px;"></div>

    <div>ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰:</div>
    <div id="output">[]</div>

    <script>
        let dots = [];
        function initGrid() {
            const size = document.getElementById('size-select').value;
            const grid = document.getElementById('maker-grid');
            grid.style.gridTemplateColumns = `repeat(${size}, 1fr)`;
            grid.innerHTML = '';
            dots = [];
            updateOutput();

            for (let y = 0; y < size; y++) {
                for (let x = 0; x < size; x++) {
                    const cell = document.createElement('div');
                    cell.className = 'cell';
                    cell.onclick = () => placeDot(x, y, cell);
                    grid.appendChild(cell);
                }
            }
        }

        function placeDot(x, y, el) {
            const val = parseInt(document.getElementById('num-input').value);
            const color = document.getElementById('color-select').value;

            // æ—¢ã«åŒã˜åº§æ¨™ã«ã‚ã‚Œã°å‰Šé™¤
            dots = dots.filter(d => !(d.x === x && d.y === y));
            
            // æ–°ã—ãè¿½åŠ 
            dots.push({x, y, val, color});
            
            // è¡¨ç¤ºæ›´æ–°
            el.innerHTML = `<div class="dot" style="background:${color}">${val}</div>`;
            updateOutput();
        }

        function updateOutput() {
            const size = document.getElementById('size-select').value;
            // ã‚²ãƒ¼ãƒ æœ¬ä½“ã«è²¼ã‚Šä»˜ã‘ã‚„ã™ã„å½¢å¼ã§å‡ºåŠ›
            const result = {
                size: parseInt(size),
                dots: dots
            };
            document.getElementById('output').innerText = JSON.stringify(result);
        }

        function copyToClipboard() {
            const text = document.getElementById('output').innerText;
            navigator.clipboard.writeText(text).then(() => alert("ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸï¼ã‚²ãƒ¼ãƒ ã®stageDataã«è²¼ã‚Šä»˜ã‘ã¦ã­"));
        }

        initGrid();
    </script>
</body>
</html>
